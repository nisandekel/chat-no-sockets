(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,a){e.exports=a(69)},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),o=a.n(r),l=(a(48),a(9)),c=a(10),i=a(12),u=a(11),m=a(13),d=window.location.origin,g=function(e){return d+e},h=a(72),p=a(73),f=(a(49),function(e){var t=0===e.color?"warning":"success";return e.isDisplayed?s.a.createElement("div",{className:t+" banner"},e.msg):null}),v=(a(50),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={userName:"",password:"",banner:{isDisplayed:!1,msg:"",color:null}},a.bannerTimeOut=null,a.changeUserNameInput=function(e){a.setState({userName:e.target.value})},a.changePasswordInput=function(e){a.setState({password:e.target.value})},a.handleLogin=function(){if(""!==a.state.userName&&""!==a.state.password){var e="Basic ".concat(btoa("".concat(a.state.userName,":").concat(a.state.password)));fetch(g("/users/login"),{method:"POST",headers:new Headers({Authorization:e})}).then(function(e){return e.json()}).then(function(e){e.autorized&&a.props.userLoggedIn(e.userName,e.userAvatar)}).catch(function(e){"TypeError"===e.name?a.showBanner("failed to login",0):"SyntaxError"===e.name&&a.showBanner("one or more fields are incorrect",0)})}else a.showBanner("please fill in all fields",0)},a.showBanner=function(e,t){var n={isDisplayed:!0,msg:e,color:t};a.setState({banner:n}),a.bannerTimeOut=setTimeout(function(){a.setState({banner:{isDisplayed:!1,msg:"",color:null}})},3e3)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.bannerTimeOut)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("table",{align:"center",className:"login",cellPadding:"10%"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"user name:"),s.a.createElement("td",null,s.a.createElement(h.a.Control,{type:"text",value:this.state.userName,onChange:this.changeUserNameInput}))),s.a.createElement("tr",null,s.a.createElement("td",null,"password:"),s.a.createElement("td",null,s.a.createElement(h.a.Control,{type:"password",value:this.state.password,onChange:this.changePasswordInput}))),s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},s.a.createElement(p.a,{onClick:this.handleLogin},"Login"))))),s.a.createElement(f,{isDisplayed:this.state.banner.isDisplayed,msg:this.state.banner.msg,color:this.state.banner.color}))}}]),t}(s.a.Component)),w=a(26),E=a.n(w),b=a(36),N=(a(54),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={userName:"",password:"",secondPassword:"",banner:{isDisplayed:!1,msg:"",color:null}},a.bannerTimeOut=null,a.changeUserName=function(e){a.setState({userName:e.target.value})},a.changePassword=function(e){a.setState({password:e.target.value})},a.changeSecondPassword=function(e){a.setState({secondPassword:e.target.value})},a.showBanner=function(e,t){var n={isDisplayed:!0,msg:e,color:t};a.setState({banner:n}),a.bannerTimeOut=setTimeout(function(){a.setState({banner:{isDisplayed:!1,msg:"",color:null}})},3e3)},a.sendData=Object(b.a)(E.a.mark(function e(){var t,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.checkValidation()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.getAvatar();case 4:t=e.sent,n={userName:a.state.userName,password:a.state.password,secondPassword:a.state.secondPassword,avatar:t},fetch(g("/users/registretion"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){a.setState({userName:"",password:"",secondPassword:""}),e.usrUploded?a.showBanner("your deatails were saved!",1):e.duplicateUniqeField&&a.showBanner("user name already exist",0)}).catch(function(e){return a.showBanner("failed to register",0)});case 7:case"end":return e.stop()}},e)})),a.checkValidation=function(){return""===a.state.userName||""===a.state.password||""===a.state.secondPassword?(a.showBanner("please fill in all fields",0),!1):a.state.password.length<8?(a.showBanner("password has to be at least 8 characters",0),!1):a.state.password===a.state.secondPassword||(a.showBanner("first password doesn't match to the second password",0),!1)},a.getAvatar=function(){return fetch("https://randomuser.me/api/").then(function(e){return e.json()}).then(function(e){return e.results.pop().picture.large}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.bannerTimeOut)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("table",{align:"center",className:"registretion",cellPadding:"10%"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"user name:"),s.a.createElement("td",null,s.a.createElement(h.a.Control,{type:"text",value:this.state.userName,onChange:this.changeUserName}))),s.a.createElement("tr",null,s.a.createElement("td",null,"password:"),s.a.createElement("td",null,s.a.createElement(h.a.Control,{type:"password",value:this.state.password,onChange:this.changePassword}))),s.a.createElement("tr",null,s.a.createElement("td",null,"repeat password:"),s.a.createElement("td",null,s.a.createElement(h.a.Control,{type:"password",value:this.state.secondPassword,onChange:this.changeSecondPassword}))),s.a.createElement("tr",null,s.a.createElement("td",{colSpan:2},s.a.createElement(p.a,{onClick:this.sendData},"submit"))))),s.a.createElement(f,{isDisplayed:this.state.banner.isDisplayed,msg:this.state.banner.msg,color:this.state.banner.color}))}}]),t}(s.a.Component)),y=a(42),I=(a(55),function(e){return s.a.createElement("div",{className:"msg"},s.a.createElement("div",{className:"msg-header"},s.a.createElement("div",{className:"usr-details"},s.a.createElement("img",{className:"user-avatar",src:e.userAvatar,alt:"user avatar"}),s.a.createElement("p",{className:"usr-name bold-text"},e.userName)),s.a.createElement("p",{className:"date-time bold-text"},e.dateTime)),s.a.createElement("p",{className:"msg-content"},e.content))});a(56);var L=function(e){var t=e.messages.map(function(e){var t=function(e){var t=e.split(".")[0].split(e.charAt(10));return t[0]+" "+t[1]}(e.dateTime);return s.a.createElement("li",{key:e.id},s.a.createElement(I,{id:e.id,content:e.content,userName:e.userName,userAvatar:e.userAvatar,dateTime:t}))});return s.a.createElement("ul",{className:"msg-list",type:"none"},t)},O=(a(57),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={messageList:[],inputValue:""},a.setTimeoutID=null,a.inputRef=s.a.createRef(),a.changeInputData=function(e){a.setState({inputValue:e.target.value})},a.sendMsg=function(){var e=a.state.inputValue;a.setState({inputValue:""}),fetch(g("/messages"),{method:"POST",body:JSON.stringify({content:e,userName:a.props.userName,userAvatar:a.props.userAvatar}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},a.getMessages=function(){var e=a.state.messageList,t=e.length?e[e.length-1].id:"emptyList";fetch(g("/messages/"+t)).then(function(e){return e.json()}).then(function(e){if(!0===e.isNeedUpdate){var n=Object(y.a)(a.state.messageList).concat(e.newMessages);a.setState({messageList:n}),"emptyList"!==t&&null!==a.inputRef.current&&a.inputRef.current.scrollIntoView()}a.setTimeoutID=setTimeout(a.getMessages,1e3)})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isLoggedIn&&this.getMessages()}},{key:"shouldComponentUpdate",value:function(){return this.props.isLoggedIn}},{key:"componentWillUnmount",value:function(){clearTimeout(this.setTimeoutID)}},{key:"render",value:function(){var e=null;return this.state.messageList.length<=2&&(e={position:"absolute",bottom:"0",width:"100%"}),this.props.isLoggedIn?s.a.createElement("div",null,s.a.createElement("h2",{className:"greet-usr"},"Hello ",this.props.userName," start chating!"),s.a.createElement("div",{className:"chat"},s.a.createElement(L,{messages:this.state.messageList}),s.a.createElement("div",{className:"send-msg",style:e},s.a.createElement(h.a.Control,{ref:this.inputRef,className:"chat-input",type:"text",placeholder:"put text here...",value:this.state.inputValue,onChange:this.changeInputData}),s.a.createElement(p.a,{className:"send-msg-btn",onClick:this.sendMsg},"Send")))):null}}]),t}(s.a.Component)),S=a(17),j=a(14),k=a(71),C=(a(58),function(e){var t=e.isLoggedIn?"Logout":"Login";return s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"title"},s.a.createElement("img",{className:"left-img header-img",src:"https://www.freeiconspng.com/uploads/car-wheel-png-image-free-download--car-wheel-png-image-free--11.png",alt:"wheel"}),s.a.createElement("h1",null,e.title),s.a.createElement("img",{className:"right-img header-img",src:"https://www.freeiconspng.com/uploads/car-wheel-png-image-free-download--car-wheel-png-image-free--11.png",alt:"wheel"})),s.a.createElement(k.a,{bg:"dark",variant:"dark",className:"navbar"},s.a.createElement("div",{className:"navbar-links"},s.a.createElement(S.b,{className:"link",to:"/",onClick:e.userLoggedOut},t),s.a.createElement(S.b,{className:"link",to:"/Registretion/"},"Registretion"),e.isLoggedIn?s.a.createElement(S.b,{className:"link",to:"/Chat/"},"Chat"):null)))}),T=(a(68),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={isLoggedIn:localStorage.getItem("isLoggedIn")||!1,userName:localStorage.getItem("userName")||"",userAvatar:localStorage.getItem("userAvatar")||""},a.appTitle="Rolling Chat",a.userLoggedIn=function(e,t){localStorage.setItem("isLoggedIn",!0),localStorage.setItem("userName",e),localStorage.setItem("userAvatar",t),a.setState({isLoggedIn:!0,userName:e,userAvatar:t})},a.userLoggedOut=function(){localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userName"),localStorage.removeItem("userAvatar"),a.setState({isLoggedIn:!1,userName:""})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(S.a,null,s.a.createElement(C,{title:this.appTitle,userLoggedOut:this.userLoggedOut,isLoggedIn:this.state.isLoggedIn}),s.a.createElement(j.b,{path:"/",exact:!0,render:function(){return e.state.isLoggedIn?s.a.createElement(j.a,{to:"/Chat/"}):s.a.createElement(v,{userLoggedIn:e.userLoggedIn})}}),s.a.createElement(j.b,{path:"/Registretion/",exact:!0,component:N}),s.a.createElement(j.b,{path:"/Chat/",exact:!0,render:function(){return s.a.createElement(O,{isLoggedIn:e.state.isLoggedIn,userName:e.state.userName,userAvatar:e.state.userAvatar})}})))}}]),t}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.b0f60d2b.chunk.js.map